using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media;

namespace HealthAnalysisDashboard
{
    /// <summary>
    /// Interaction logic for CaloriesEaten.xaml
    /// </summary>
    public partial class CaloriesEaten : UserControl
    {
        private static readonly string FatColor = "#7AB9DD";
        private static readonly string FibreColor = "#5A9AC6";
        private static readonly string CarbsColor = "#428BBA";
        private static readonly string CalciumColor = "#20699C";
        private static readonly string ProteinColor = "#0E5585";
        private static readonly string VitaminsColor = "#033466";
        public CaloriesEaten()
        {
            InitializeComponent();
            breakfast.Background = Brushes.LightBlue;
            InitializePathData();
        }


        // Initialize geometry paths for data visualization
        private void InitializePathData()
        {
            breakfastPath.Data = Geometry.Parse("M11,7.0620072C5.849,7.0620072 2,8.9090068 2,10.562006 2,11.366006 2.9489999,12.056005 3.5149999,12.397006 3.816,12.577005 4,12.903005 4,13.254005L4,24.968002 18,24.968002 18,20.906002 18,13.254005C18,12.903005 18.184,12.577005 18.485,12.397006 19.051,12.056005 20,11.366006 20,10.562006 20,8.9090068 16.151,7.0620072 11,7.0620072z M21,2C16.331905,1.9999998,12.733131,3.516933,12.099389,5.0316627L12.078293,5.08652 12.156964,5.0893223C17.843652,5.360523 22,7.6220071 22,10.562006 22,11.421006 21.639,12.648005 20,13.797005L20,19.906002 28,19.906002 28,8.1920145C28,7.8410018 28.183998,7.515013 28.485001,7.3349898 29.050999,6.9940169 30,6.3040149 30,5.4999988 30,3.8470147 26.151001,1.9999998 21,2z M21,0C27.271,2.3466418E-07 32,2.3640134 32,5.4999988 32,6.3590076 31.639,7.5859969 30,8.7350137L30,20.906002C30,21.458004,29.551998,21.906002,29,21.906002L20,21.906002 20,25.968002C20,26.520002,19.552,26.968002,19,26.968002L3,26.968002C2.448,26.968002,2,26.520002,2,25.968002L2,13.797005C0.36100006,12.648005 0,11.421006 0,10.562006 0,7.6220071 4.1563478,5.360523 9.8430357,5.0893223L10.028655,5.08271 10.030844,5.0642536C10.446732,2.1475816,15.022953,2.3466418E-07,21,0z");
            lunchPath.Data = Geometry.Parse("M0,20.028988L32,20.028988 32,21.479 0,21.479z M16,0C17.109009,2.3205939E-07 18.009033,0.81103522 18.009033,1.8120117 18.009033,2.5919797 17.460999,3.2550047 16.694031,3.5100093L16.694031,4.0570061 16.916992,4.0570061 16.916992,4.5269768 16.694031,4.5269768 16.694031,5.0910027C23.914001,5.4169915 29.656982,10.799009 29.656982,17.390989 29.656982,17.535032 29.653015,17.677 29.64801,17.819029L25.755981,17.819029C24.914001,8.6480091 18.338989,7.5330188 18.338989,7.5330188 23.936035,10.00299 23.778992,17.288999 23.76001,17.819029L2.3519897,17.819029C2.3469849,17.677 2.3430176,17.535032 2.3430176,17.390989 2.3430176,10.799009 8.0859985,5.4169915 15.30603,5.0910027L15.30603,4.5269768 15.083008,4.5269768 15.083008,4.0570061 15.30603,4.0570061 15.30603,3.5100093C14.539001,3.2550047 13.991028,2.5919797 13.991028,1.8120117 13.991028,0.81103522 14.890015,2.3205939E-07 16,0z");
            dinnerPath.Data = Geometry.Parse("M4.7479848,0.10400391C7.3709701,0.10400391 9.4959697,2.8280029 9.4959697,6.1900024 9.4959697,9.0639954 7.9359721,11.463013 5.8439931,12.097992L5.8439931,32 3.7059926,32 3.7059926,12.118988C1.5869749,11.51001 1.0305666E-07,9.0899963 0,6.1900024 1.0305666E-07,2.8280029 2.1259762,0.10400391 4.7479848,0.10400391z M14.028012,0L15.854,0 15.854,9.8420105 18.140987,9.8420105 18.140987,0.1210022 19.966976,0.1210022 19.966976,9.8420105 21.942011,9.8420105 21.942011,0 23.768,0 23.768,9.8420105 23.768,11.546997 23.768,11.667999 19.966976,11.667999 19.966976,32 17.828976,32 17.828976,11.667999 14.028012,11.667999 14.028012,11.546997 14.028012,9.8420105z");
            snackPath.Data = Geometry.Parse("M0,10.109985C0.53900016,10.372986 6.5969702,13.125977 14.152007,13.125977 21.70796,13.125977 27.112978,10.560974 27.651001,10.297974L24.103951,32 3.5480264,32z M18.438986,7.3510132L19.828997,11.880981C19.032978,12.016968,18.184958,12.132996,17.293968,12.216003z M8.3290216,6.9389648L9.0060226,11.72998C8.4659845,11.645996,7.9459664,11.552979,7.4509722,11.450989z M5.7250239,4.2860107L7.980024,4.7730103 6.7129976,11.291992C5.838976,11.093994,5.0480233,10.877991,4.3500267,10.664001z M25.631962,2.7539673L28.025999,3.6199951 25.555973,10.44696C25.014959,10.641968,24.376961,10.85199,23.65394,11.060974L23.624949,11.062988 23.176951,9.7609863 23.601938,8.3640137z M19.343952,2.4519653L22.423962,11.266968C21.666945,11.466003,21.160963,11.580017,20.25795,11.744019L18.556965,5.9489746z M2.4949893,2.1380005L3.9910187,7.5159912 3.2449878,10.873962C3.2449878,10.873962,2.3829902,10.549988,2.1680249,10.46698L0.041015623,2.8209839z M12.480991,0.93499756L15.025968,1.0299683 14.899991,3.1879883 13.041964,12.099976 12.230014,5.2030029z M16.764977,0.65100098L19.241963,1.2409668 16.610987,12.291016C15.894008,12.338989 15.153958,12.367004 14.387968,12.367004 14.272002,12.367004 14.157989,12.364014 14.043975,12.362976L14.832975,8.5769653z M21.17195,0.29998779L23.707955,0.52996826 23.120981,7.1109619 22.75697,8.30896 20.930985,3.0059814z M10.681983,0L12.277988,12.547974C11.408971,12.498962,10.577003,12.416992,9.7850124,12.312988L8.1520206,0.29296875z");
            caloriesPath.Data = Geometry.Parse("M8.1805072,0.00054359436C8.2435055,0.0045433044 8.3085036,0.026544571 8.3665023,0.071544647 9.0064859,0.56855202 9.5644722,1.1515598 10.04146,1.7745686 11.874414,4.1735992 12.706393,7.125639 12.706393,9.9926777 12.706393,11.7157 12.886388,13.129719 13.19238,13.94773 13.958361,15.995758 15.305327,15.086745 15.083332,11.506698 15.065333,11.205693 15.418324,11.028691 15.646318,11.228694 16.406299,11.893703 17.720266,13.440723 18.787239,16.758768 19.618218,19.376803 19.784214,21.45083 19.673216,22.93385 19.373224,27.781915 14.041359,30.38095 11.666419,31.596966 11.361426,31.752968 10.774441,31.439964 10.953437,31.14796 12.872388,28.027918 14.620344,24.087866 12.446399,21.110826 10.188456,18.018785 7.2595301,15.245748 7.2595301,15.245748 7.2595301,15.245748 8.2745047,16.383763 5.6995697,22.14084 4.1556091,25.591886 7.5325236,29.728941 8.5564976,31.319963 8.7434926,31.613966 8.4095011,32.131973 8.102509,31.968971L7.6515203,31.768969C6.0645609,30.923957 2.0056629,29.195934 0.84069252,26.735901 0.23170757,25.452884 -1.486248,20.709821 2.9456396,14.535738 7.8335156,7.8796492 7.9605126,2.3085747 7.8195162,0.36454964 7.8035164,0.14654541 7.989512,-0.010456085 8.1805072,0.00054359436z");
        }

        private void Breakfast_MouseDown(object sender, MouseButtonEventArgs e)
        {
            SetActiveMeal(breakfast);
            viewModel.UpdateMacroNutrients(CreateMacroNutrients(50, 30, 30, 20, 40, 90));
        }

        private void Lunch_MouseDown(object sender, MouseButtonEventArgs e)
        {
            SetActiveMeal(lunch);
            viewModel.UpdateMacroNutrients(CreateMacroNutrients(40, 25, 60, 30, 50, 70));
        }

        private void Dinner_MouseDown(object sender, MouseButtonEventArgs e)
        {
            SetActiveMeal(dinner);
            viewModel.UpdateMacroNutrients(CreateMacroNutrients(60, 20, 50, 25, 60, 80));
        }

        private void Snack_MouseDown(object sender, MouseButtonEventArgs e)
        {
            SetActiveMeal(snack);
            viewModel.UpdateMacroNutrients(CreateMacroNutrients(20, 15, 40, 10, 30, 50));
        }

        private void SetActiveMeal(UIElement mealElement)
        {
            ResetAllBorderBackgrounds();
            mealElement.SetValue(Border.BackgroundProperty, Brushes.LightBlue);
        }

        private void ResetAllBorderBackgrounds()
        {
            breakfast.Background = Brushes.Transparent;
            lunch.Background = Brushes.Transparent;
            dinner.Background = Brushes.Transparent;
            snack.Background = Brushes.Transparent;
        }

        private List<MacroNutrient> CreateMacroNutrients(int fat, int fibre, int carbs, int calcium, int protein, int vitamins)
        {
            return new List<MacroNutrient>
            {
                new MacroNutrient { Name = "Fat", Amount = fat, Color = GetSolidColorBrush(FatColor) },
                new MacroNutrient { Name = "Fibre", Amount = fibre, Color = GetSolidColorBrush(FibreColor) },
                new MacroNutrient { Name = "Carbs", Amount = carbs, Color = GetSolidColorBrush(CarbsColor) },
                new MacroNutrient { Name = "Calcium", Amount = calcium, Color = GetSolidColorBrush(CalciumColor) },
                new MacroNutrient { Name = "Protein", Amount = protein, Color = GetSolidColorBrush(ProteinColor) },
                new MacroNutrient { Name = "Vitamins", Amount = vitamins, Color = GetSolidColorBrush(VitaminsColor) }
            };
        }

        private SolidColorBrush GetSolidColorBrush(string colorCode)
        {
            return (SolidColorBrush)new BrushConverter().ConvertFrom(colorCode)!;
        }
    }
}
